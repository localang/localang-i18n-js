/*!
 * localang v0.0.1
 * (c) Localang
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("fs"),require("path")):"function"==typeof define&&define.amd?define(["exports","fs","path"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).localang={},e.fs,e.path)}(this,(function(e,n,t){"use strict";var i=function(){return i=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},i.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var r=function(e,n){return void 0===n&&(n={}),e.replace(/\{(\w+)}/g,(function(e,t){return t in n?String(n[t]):e}))},o=function(){function e(){this.settings={lang:"en"},this.setSettings=this.setSettings.bind(this),this.makeI18n=this.makeI18n.bind(this)}return e.prototype.setSettings=function(e){this.settings=i(i({},this.settings),e)},e.prototype.makeI18n=function(e,n){return function(e,n,t){return function(i){var o=n[i];if(!o)return"";var s=o[e];if("object"==typeof s&&null!==s){if(!t)return s.zero;var a=Object.keys(t).find((function(e){return/^count([0-9+]?)+$/.test(e)})),u=a&&a in t&&Number(t[a])||0,c=0===u?"zero":new Intl.PluralRules(e).select(u);return r(s[c],t)}return s?r(s,t):""}}(this.settings.lang,e,n)},e}(),s={module:{importT:"import { makeI18n } from 'localang-i18n-js';",exportT:"export const i18n = makeI18n(keyset);",getImportFromI18nFileT:function(e){return"import { i18n } from './".concat(e,"';")}},commonjs:{importT:"const { makeI18n } = require('localang-i18n-js');",exportT:"module.exports = makeI18n(keyset);",getImportFromI18nFileT:function(e){return"const i18n = require('./".concat(e,"');")}}};var a,u=function(e){var r=e.keyLanguage,o=e.langs,a=e.fileExt,u=e.importType;return{create:function(e){var c=new Set,f=s[u],l=f.importT,p=f.exportT,m=f.getImportFromI18nFileT;return{CallExpression:function(n){var t,i;"name"in n.callee&&"i18n"===(null===(t=n.callee)||void 0===t?void 0:t.name)&&n.arguments.length>=1&&"Literal"===(null===(i=n.arguments[0])||void 0===i?void 0:i.type)&&"string"==typeof n.arguments[0].value&&(e.filename.includes(".i18n.")||c.add(n.arguments[0].value))},"Program:exit":function(){var s=e.filename.substring(0,e.filename.lastIndexOf(".")),u="".concat(s,".i18n.").concat(a),f=function(e){if(n.existsSync(e)){var t=n.readFileSync(e,"utf8");return t=(t=(t=(t=t.replace(/const keyset = |;/g,"")).substring(t.indexOf("\n")+1)).substring(0,t.lastIndexOf("\n"))).substring(0,t.lastIndexOf("\n")),JSON.parse(t)}return{}}(u),g=i({},f);c.forEach((function(e){if(!g[e]){var n=/\bcount\d*\b/.test(e);g[e]={},o.forEach((function(t){var i=t===r?e:"";g[e][t]=n?{zero:i,one:i,two:i,few:i,many:i,other:i}:i}))}})),Object.keys(f).forEach((function(e){c.has(e)||delete g[e]})),0===Object.keys(g).length?function(e){n.existsSync(e)&&n.unlinkSync(e)}(u):(function(e){var t=e.fileName,i=e.keyset,r=e.exportT,o=e.importT;n.writeFileSync(t,"".concat(o,"\n\nconst keyset = ").concat(JSON.stringify(i,null,4),";\n\n").concat(r,"\n"))}({fileName:u,keyset:g,importT:l,exportT:p}),function(e,t){var i=n.readFileSync(e,"utf8");/import\s*\{\s*i18n\s*\}\s*from\s*['"]\..*\.i18n\.js['"]\s*;/.test(i)||/const\s*{\s*i18n\s*}\s*=\s*require\s*\(['"]\..*\.i18n\.js['"]\)\s*;/.test(i)||n.writeFileSync(e,t+i)}(e.filename,m(t.basename(u))))}}}}},c=(a=new o).makeI18n,f=a.setSettings;e.createEslintPlugin=function(e){var n=void 0===e?{}:e,t=n.keyLanguage,i=void 0===t?"en":t,r=n.langs,o=void 0===r?["en"]:r,s=n.fileExt,a=void 0===s?"js":s,c=n.importType;return{configs:{generateI18nFile:[{ignores:["**/*.i18n.*"]}]},rules:{"generate-i18n-file":u({keyLanguage:i,langs:o,fileExt:a,importType:void 0===c?"module":c})}}},e.makeI18n=c,e.setSettings=f}));
//# sourceMappingURL=index.umd.min.js.map
